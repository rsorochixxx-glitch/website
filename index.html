<!DOCTYPE html>
<html>
<head>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <h1 id="display">0</h1>
    <h1 id="display1">0</h1>
    <button id="add">Нажать</button>
    <button id="send">Готово (Отправить)</button>

    <script>
        const tg = window.Telegram.WebApp;
        let count = 0;

        document.getElementById('add').onclick = () => {
            count++;
            document.getElementById('display').innerText = count;
        };

        document.getElementById('send').onclick = async () => {
            const queryId = tg.initDataUnsafe.query_id; // Важно для Inline
            document.getElementById('display1').innerText = queryId;

            await fetch('http://127.0.0.1:8000/', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    query_id: queryId,
                    count: count
                })
            });
        };
    </script>
</body>
</html>
